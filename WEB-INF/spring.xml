<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:context="http://www.springframework.org/schema/context"  
	xmlns:dwr="http://www.directwebremoting.org/schema/spring-dwr"
	xmlns:sec="http://www.springframework.org/schema/security"
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context   
        http://www.springframework.org/schema/context/spring-context-2.5.xsd
		http://www.springframework.org/schema/tx 
		http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
		http://www.directwebremoting.org/schema/spring-dwr
		http://www.directwebremoting.org/schema/spring-dwr-2.0.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
		http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-2.0.1.xsd">
	<!--  hbt -->
    
    
<!--
<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName">
      <value>com.microsoft.sqlserver.jdbc.SQLServerDriver</value>
    </property>
   
    <property name="url">
        <value>jdbc:sqlserver://172.16.10.62:8433;databaseName=pmhs_km_zs</value>
        </property>
        <property name="username">
            <value>sa</value>
        </property>
        <property name="password">
            <value>kmwsj2013</value>
        </property>
    </bean>
 -->   
	<bean id="dataSource"
		class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"> 
		<property name="driverClassName" value="com.microsoft.sqlserver.jdbc.SQLServerDriver" />
		<property name="url" value="jdbc:sqlserver://172.16.10.62:8433;databaseName=pmhs_km_zs" />       
		<property name="username" value="kmwsj" />       
		<property name="password" value="kmwsj2013" /> 
		<property name="initialSize" value="1"/>
		<property name="maxActive" value="1"/>
    </bean>
	<!--
	<bean id="dataSource"
		class="com.mchange.v2.c3p0.ComboPooledDataSource"> 
		<property name="driverClass" value="com.microsoft.sqlserver.jdbc.SQLServerDriver" />
		<property name="jdbcUrl" value="jdbc:sqlserver://172.16.10.62:8433;databaseName=pmhs_km_zs" />       
		<property name="user" value="kmwsj" />       
		<property name="password" value="kmwsj2013" /> 
		<property name="initialPoolSize" value="3"></property>
	   <property name="minPoolSize" value="3"></property>
	   <property name="maxPoolSize" value="3"></property>
	   <property name="maxIdleTime" value="60"></property>
	   <property name="acquireIncrement" value="5"></property>
	   <property name="idleConnectionTestPeriod" value="60"></property>
	   <property name="acquireRetryAttempts" value="20"></property>
	   <property name="breakAfterAcquireFailure" value="true"></property>
	   <property name="maxStatements" value="0"></property>
	   <property name="testConnectionOnCheckout" value="false"></property>
    </bean>
    -->
     <!--
<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName">
      <value>com.microsoft.sqlserver.jdbc.SQLServerDriver</value>
    </property>
    <property name="url">
        <value>jdbc:sqlserver://192.168.1.100:1433;databaseName=pmhs20121031</value>
     </property>
        <property name="username">
            <value>sa</value>
        </property>
        <property name="password">
            <value>hissystem2010</value>
        </property>
    </bean>
  -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource">
            <ref local="dataSource"/>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
				<prop key="hibernate.release_mode">auto</prop>
                <!-- <prop key="hibernate.hbm2ddl.auto">update</prop> -->
            </props>
        </property>
        <property name="mappingDirectoryLocations">
            <list>
                <value>classpath:cn/net/tongfang/framework/security/vo</value>
            </list>
        </property>
        <property name="configurationClass" value="org.hibernate.cfg.AnnotationConfiguration" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory">
            <ref local="sessionFactory"/>
        </property>
    </bean>
<!--
	
    <bean id="transactionInterceptor"
        class="org.springframework.transaction.interceptor.TransactionInterceptor">
        <property name="transactionManager" ref="transactionManager" />
        <property name="transactionAttributes">
            <props>
                <prop key="*">PROPAGATION_REQUIRED</prop>
            </props>
        </property>
    </bean>

    <bean class="org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator">
        <property name="beanNames">
            <list>
                <value>*Service</value>
            </list>
        </property>
        <property name="interceptorNames">
            <list>
                <value>transactionInterceptor</value>
            </list>
        </property>
    </bean>
	
	     -->
		<!-- app.xml开始--> 
	<bean id="securityService" class="cn.net.tongfang.framework.security.SecurityServiceImpl">
		<property name="sessionFactory" ref="sessionFactory"></property>
	</bean>
	
	<bean id="fileNoGen" class="cn.net.tongfang.web.util.FileNoGen">
		<property name="sessionFactory" ref="sessionFactory"></property>
	</bean>	
	
	<!-- 修改开始 -->
	<bean id="homeNoGen" class="cn.net.tongfang.web.util.HomeNoGen">
		<property name="sessionFactory" ref="sessionFactory"></property>
	</bean>	
	<bean id="mgr" class="cn.net.tongfang.framework.util.service.ModuleMgr">
		<property name="sessionFactory" ref="sessionFactory"></property>
	</bean>	
	<!-- 修改结束 -->
	<!--EncryUtils必须在最开始被执行,凡是与加密有关的都不能在它之前执行,配置也必须放在其后-->
	<bean id="EncryUtils"
		class="cn.net.tongfang.framework.util.EncryUtils" scope="singleton"> 
		<property name="sessionFactory" ref="sessionFactory"/>
	</bean>
	
	<bean id="ScoreUtil"
		class="cn.net.tongfang.web.service.score.ScoreUtil"   scope="singleton"> 
		<property name="sessionFactory" ref="sessionFactory"/>
	</bean>
	
	<bean id="ModuleUtil"
		class="cn.net.tongfang.framework.util.ModuleUtil" scope="singleton"> 
		<property name="sessionFactory" ref="sessionFactory"/>
	</bean>
	
	<bean id="commonExamUtil"
		class="cn.net.tongfang.web.service.commonexam.CommonExamUtil" scope="singleton"> 
		<property name="sessionFactory" ref="sessionFactory"/>
	</bean>
	
	
	<!--
	<bean id="ConfigUtils"
		class="cn.net.tongfang.framework.util.ConfigUtils" scope="singleton"> 
		<constructor-arg ref="systemInformationUtils"/>
	</bean>
	<bean id="EncryptionUtils"
		class="cn.net.tongfang.framework.util.EncryptionUtils"> 
		<constructor-arg ref="ConfigUtils"/>
	</bean>
	-->
	<!--定时短信相关任务 -->
	<bean id="SmsUtil"
		class="cn.net.tongfang.framework.util.SmsUtil" scope="singleton"> 
		<property name="sessionFactory" ref="sessionFactory"/>
		<property name="host" ><value>127.0.0.1</value></property>
		<property name="name" ><value>test</value></property>
		<property name="pwd" ><value>test</value></property>
		<property name="apiId" ><value>test</value></property>
		<property name="dbName" ><value>mas</value></property>
	</bean>
	<!-- app.xml j结束-->
	
	<!-- app-beans -->
	<bean id="HelloService"
		class="cn.net.tongfang.framework.security.demo.service.SimpleServiceImpl">
		<aop:scoped-proxy />
	</bean>
	

	<bean id="springSecurityFilterChain" class="org.springframework.security.util.FilterChainProxy">
		<property name="filterInvocationDefinitionSource">
			<value><![CDATA[
				CONVERT_URL_TO_LOWERCASE_BEFORE_COMPARISON
				PATTERN_TYPE_APACHE_ANT
				/**=httpSessionContextIntegrationFilter,logoutFilter,authenticationProcessingFilter,basicProcessingFilter,securityContextHolderAwareRequestFilter,rememberMeProcessingFilter,anonymousProcessingFilter,exceptionTranslationFilter,filterInvocationInterceptor
			]]></value>
		</property>
	</bean>

	<bean id="httpSessionContextIntegrationFilter" class="org.springframework.security.context.HttpSessionContextIntegrationFilter"/>

	<bean id="logoutFilter" class="org.springframework.security.ui.logout.LogoutFilter">
		<constructor-arg value="/login.jsp"/> <!-- URL redirected to after logout -->
		<constructor-arg>
			<list>
				<ref bean="rememberMeServices"/>
				<bean class="org.springframework.security.ui.logout.SecurityContextLogoutHandler"/>
			</list>
		</constructor-arg>
	</bean>
<!--
	<bean id="authenticationProcessingFilter" class="org.springframework.security.ui.webapp.AuthenticationProcessingFilter">
		<property name="authenticationManager" ref="authenticationManager"/>
		<property name="authenticationFailureUrl" value="/login.jsp?login_error=1"/>
		<property name="defaultTargetUrl" value="/admin"/>
		<property name="filterProcessesUrl" value="/j_spring_security_check"/>
		<property name="rememberMeServices" ref="rememberMeServices"/>
	</bean>

	-->
	<bean id="authenticationProcessingFilter" class="org.springframework.security.ui.webapp.AuthenticationProcessingFilter">
		<property name="authenticationManager" ref="authenticationManager"/>
		<property name="authenticationFailureUrl" value="/login.jsp?login_error=1"/>
		<property name="defaultTargetUrl" value="/admin"/>
		<property name="filterProcessesUrl" value="/j_spring_security_check"/>
		<property name="rememberMeServices" ref="rememberMeServices"/>
	</bean>

    <bean id="basicProcessingFilter" class="org.springframework.security.ui.basicauth.BasicProcessingFilter">
        <property name="authenticationManager"><ref local="authenticationManager"/></property>
        <property name="authenticationEntryPoint"><ref local="basicProcessingFilterEntryPoint"/></property>
    </bean>

    <bean id="basicProcessingFilterEntryPoint" class="org.springframework.security.ui.basicauth.BasicProcessingFilterEntryPoint">
        <property name="realmName"><value>My Realm</value></property>
    </bean>

	<bean id="securityContextHolderAwareRequestFilter" class="org.springframework.security.wrapper.SecurityContextHolderAwareRequestFilter"/>

	<bean id="rememberMeProcessingFilter" class="org.springframework.security.ui.rememberme.RememberMeProcessingFilter">
		<property name="authenticationManager" ref="authenticationManager"/>
		<property name="rememberMeServices" ref="rememberMeServices"/>
	</bean>

	<bean id="anonymousProcessingFilter" class="org.springframework.security.providers.anonymous.AnonymousProcessingFilter">
		<property name="key" value="changeThis"/>
		<property name="userAttribute" value="anonymousUser,ROLE_ANONYMOUS"/>
	</bean>

	<bean id="exceptionTranslationFilter" class="org.springframework.security.ui.ExceptionTranslationFilter">
		<property name="authenticationEntryPoint">
			<bean class="org.springframework.security.ui.webapp.AuthenticationProcessingFilterEntryPoint">
				<property name="loginFormUrl" value="/login.jsp"/>
				<property name="forceHttps" value="false"/>
			</bean>
		</property>
		<property name="accessDeniedHandler">
			<bean class="org.springframework.security.ui.AccessDeniedHandlerImpl">
				<property name="errorPage" value="/accessDenied.jsp"/>
			</bean>
		</property>
	</bean>

	<bean id="accessDecisionManager" class="org.springframework.security.vote.AffirmativeBased">
		<property name="allowIfAllAbstainDecisions" value="false"/>
		<property name="decisionVoters">
			<list>
				<bean class="org.springframework.security.vote.RoleVoter"/>
				<bean class="org.springframework.security.vote.AuthenticatedVoter"/>
			</list>
		</property>
	</bean>

	<bean id="filterInvocationInterceptor" class="org.springframework.security.intercept.web.FilterSecurityInterceptor">
		<property name="authenticationManager" ref="authenticationManager"/>
		<property name="accessDecisionManager" ref="accessDecisionManager"/>
		<property name="objectDefinitionSource">
			<value><![CDATA[
				CONVERT_URL_TO_LOWERCASE_BEFORE_COMPARISON
				PATTERN_TYPE_APACHE_ANT
				/secure/extreme/**=ROLE_SUPERVISOR
				/secure/**=IS_AUTHENTICATED_REMEMBERED
				/admin/**=IS_AUTHENTICATED_REMEMBERED
				/**=IS_AUTHENTICATED_ANONYMOUSLY
			]]></value>
		</property>
	</bean>

	<bean id="rememberMeServices" class="org.springframework.security.ui.rememberme.TokenBasedRememberMeServices">
		<property name="userDetailsService" ref="myUserDetailsService"/>
		<property name="key" value="changeThis"/>
	</bean>

	<bean id="authenticationManager" class="org.springframework.security.providers.ProviderManager">
		<property name="providers">
			<list>
				<ref local="daoAuthenticationProvider"/>
				<bean class="org.springframework.security.providers.anonymous.AnonymousAuthenticationProvider">
					<property name="key" value="changeThis"/>
				</bean>
				<bean class="org.springframework.security.providers.rememberme.RememberMeAuthenticationProvider">
					<property name="key" value="changeThis"/>
				</bean>
			</list>
		</property>
	</bean>

	<bean id="daoAuthenticationProvider" class="org.springframework.security.providers.dao.DaoAuthenticationProvider">
		<property name="userDetailsService" ref="myUserDetailsService"/>
		<property name="hideUserNotFoundExceptions">
			<value>false</value>
		</property>
		<property name="passwordEncoder" ref="passwordEncoder"/>
	</bean>

	<!-- This bean is optional; it isn't used by any other bean as it only listens and logs -->
	<bean id="loggerListener" class="org.springframework.security.event.authentication.LoggerListener"/>
	
	<bean id="passwordEncoder" class="org.springframework.security.providers.encoding.Md5PasswordEncoder">
		<property name="encodeHashAsBase64" value="false"></property>
	</bean>
	
	<!-- acegiCtx -->
	
	<!-- Bean post-processor for activating any advisors -->
	<bean
		class="org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator" />

	<bean id="_saProvider"
		class="cn.net.tongfang.framework.security.ServiceAuthorizationProviderImpl">
		<constructor-arg ref="securityService"/>
	</bean>

	<bean id="_methodDefinitionSource"
		class="cn.net.tongfang.framework.security.DBMethodDefinitionSource">
		<property name="saProvider" ref="_saProvider" />
	</bean>

	<bean id="_methodDefinitionSourceAdvisor"
		class="org.springframework.security.intercept.method.aopalliance.MethodDefinitionSourceAdvisor">
		<constructor-arg value="_methodSecurityInterceptor" />
		<constructor-arg ref="_methodDefinitionSource" />
	</bean>

	<bean id="_methodSecurityInterceptor"
		class="org.springframework.security.intercept.method.aopalliance.MethodSecurityInterceptor">
		<property name="validateConfigAttributes" value="false" />
		<property name="authenticationManager" ref="authenticationManager" />
		<property name="accessDecisionManager" ref="_accessManager" />
		<property name="objectDefinitionSource"
			ref="_methodDefinitionSource" />
	</bean>

	<bean id="_accessManager"
		class="org.springframework.security.vote.AffirmativeBased">
		<property name="allowIfAllAbstainDecisions"
			value="false" />
		<property name="decisionVoters">
			<list>
				<bean class="org.springframework.security.vote.RoleVoter">
					<property name="rolePrefix" value="" />
				</bean>
				<bean class="org.springframework.security.vote.AuthenticatedVoter" />
			</list>
		</property>
	</bean>
	
	<bean id="controlVersion" class="cn.net.tongfang.framework.security.demo.service.ControlVersion"/>
	<bean id="myUserDetailsService" class="cn.net.tongfang.framework.security.demo.service.MyUserDetailsServiceImpl" >
		<property name="securityService" ref="securityService"/>
		<property name="controlVersion" ref="controlVersion"/>
	</bean>
	
	<!-- dwrCtx -->
	
	<dwr:controller id="dwrController" debug="true" />
	<dwr:configuration>
		<dwr:init>
			<dwr:converter id="timestamp"
				class="cn.net.tongfang.framework.dwr.convert.TimestampConverter" />
			<dwr:converter id="integer"
				class="cn.net.tongfang.framework.dwr.convert.IntegerConverter" />
		</dwr:init>
		<dwr:convert type="exception" class="java.lang.Exception"/>
		<dwr:convert type="bean" class="cn.net.tongfang.web.service.commonexam.CommonVO"/>

		<dwr:convert type="bean" class="java.lang.StackTraceElement" />

		<dwr:convert type="integer" class="java.lang.Integer" />
		<dwr:convert type="timestamp" class="java.sql.Timestamp" />
		<!-- <dwr:convert type="boolean" class="java.lang.Boolean"/> <dwr:convert 
			type="string" class="java.lang.String"/> -->

		<dwr:convert type="bean" class="cn.net.tongfang.framework.demo.*" />

		<dwr:convert type="bean"
			class="cn.net.tongfang.framework.security.bo.*" />
		<dwr:convert type="bean"
			class="cn.net.tongfang.framework.security.vo.*" />
		<dwr:convert type="bean"
			class="cn.net.tongfang.framework.security.vo.SamTaxempcode" />
		<dwr:convert type="bean"
			class="cn.net.tongfang.framework.util.service.vo.*" />
		<dwr:convert type="bean" class="cn.net.tongfang.web.service.bo.*" />
		<dwr:convert type="bean"
			class="cn.net.tongfang.framework.security.demo.service.vo.*" />

		<dwr:convert type="bean"
			class="cn.net.tongfang.framework.security.demo.service.TaxempDetail" />
		<dwr:convert type="bean"
			class="org.springframework.security.GrantedAuthorityImpl" />


	</dwr:configuration>

	<bean id="DWRHelloService"
		class="cn.net.tongfang.framework.security.demo.service.SimpleServiceImpl">
		<aop:scoped-proxy />
		<dwr:remote javascript="HelloService"><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="DWRModuleService"
		class="cn.net.tongfang.framework.security.demo.service.ModuleServiceImpl">
		<property name="securityService" ref="securityService" />
		<aop:scoped-proxy />
		<dwr:remote javascript="ModuleService"><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="MyUserService"
		class="cn.net.tongfang.framework.security.demo.service.UserServiceImpl">
		<property name="sessionFactory" ref="sessionFactory" />
		<aop:scoped-proxy />
		<dwr:remote javascript="MyUserService"><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="DWRXnhInterfaceService"
		class="cn.net.tongfang.framework.security.demo.service.XnhInterfaceServiceImpl">
		<aop:scoped-proxy />
		<dwr:remote javascript="XnhInterfaceService"><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="OptionProvider" class="cn.net.tongfang.framework.util.service.OptionProvider">
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="optionClassMap">
			<map>
				<entry>
					<key>
						<value>ModuleCategory</value>
					</key>
					<value>cn.net.tongfang.framework.security.vo.SamModuleCategory
					</value>
				</entry>
				<entry>
					<key>
						<value>Taxorgcode</value>
					</key>
					<value>cn.net.tongfang.framework.security.vo.SamTaxorgcode</value>
				</entry>
				<entry>
					<key>
						<value>HospitalProp</value>
					</key>
					<value>cn.net.tongfang.framework.security.vo.HospitalProp</value>
				</entry>
				<entry>
					<key>
						<value>Producers</value>
					</key>
					<value>cn.net.tongfang.framework.security.vo.Producers</value>
				</entry>
				<entry>
					<key>
						<value>BasicInformation</value>
					</key>
					<value>cn.net.tongfang.framework.security.vo.BasicInformation</value>
				</entry>
			</map>
		</property>
		<dwr:remote javascript="OptionProvider"><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="COptionProvider" class="cn.net.tongfang.framework.util.service.COptionProvider">
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="optionClassMap">
			<map>
				<entry>
					<key>
						<value>Taxorgcode</value>
					</key>
					<value>cn.net.tongfang.framework.security.vo.SamTaxorgcode</value>
				</entry>
			</map>
		</property>
		<dwr:remote javascript="COptionProvider"><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="OrgOptProvider" class="cn.net.tongfang.framework.util.service.TaxOrgProvider">
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="optionClassMap">
			<map>
				<entry>
					<key>
						<value>Taxorgcode</value>
					</key>
					<value>cn.net.tongfang.framework.security.vo.SamTaxorgcode</value>
				</entry>
			</map>
		</property>
		<dwr:remote javascript="OrgOptProvider"><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<!--
	<bean id="SmsService" class="cn.net.tongfang.web.service.sms.SmsService">
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="smsUtil" ref="SmsUtil" />
		<dwr:remote javascript="SmsService"> <dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
		<aop:scoped-proxy />
	</bean>
	-->
	
	<bean id="CacheService" class="cn.net.tongfang.web.service.cache.CacheService">
		<property name ='cacheList'>
			<list> 
				<ref bean="ModuleUtil" /> 
				<ref bean="ScoreUtil" /> 
				<ref bean="commonExamUtil" /> 
			</list> 
		</property>
		<dwr:remote javascript="CacheService"> <dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
		<aop:scoped-proxy />
	</bean>

	<bean id="ScoreService" class="cn.net.tongfang.web.service.score.ScoreService">
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="scoreUtil" ref="ScoreUtil"/>
		<dwr:remote javascript="ScoreService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
		<aop:scoped-proxy />
	</bean>

	<bean id="UserMenuTreeService" class="cn.net.tongfang.framework.util.service.ModuleMgr">
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="moduleUtil" ref="ModuleUtil" />
		<dwr:remote javascript="UserMenuTreeService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
		<aop:scoped-proxy />
	</bean>

	<bean id="DWRUserService" class="cn.net.tongfang.framework.security.UserServiceImpl">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="UserService"  ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean class="cn.net.tongfang.framework.demo.DemoServiceImpl">
		<dwr:remote javascript="DemoService" />
	</bean>

	<bean id="MetaProvider"
		class="cn.net.tongfang.framework.security.demo.service.MetaServiceImpl">
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="MetaProvider" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="HealthFileService" class="cn.net.tongfang.web.service.HealthFileService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="HealthFileService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="PersonalInfoService" class="cn.net.tongfang.web.service.PersonalInfoService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="fileNoGen" ref="fileNoGen" />
		<property name="moduleMgr" ref="UserMenuTreeService" />
		<dwr:remote javascript="PersonalInfoService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="ChildBirthService" class="cn.net.tongfang.web.service.ChildBirthService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="fileNoGen" ref="fileNoGen" />
		<dwr:remote javascript="ChildBirthService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="BabyVisitService" class="cn.net.tongfang.web.service.BabyVisitService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="childDirect" ref="GenDefaultVal" />
		<property name="sysUtils" ref="systemInformationUtils" />
		<property name="childRocordService" ref="ChildLastMedicalExamRecordService" />
		<dwr:remote javascript="BabyVisitService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="ChildrenMediExam3Service" class="cn.net.tongfang.web.service.ChildrenMediExam3Service">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="ChildrenMediExam3Service" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="ChildrenMediExam36Service" class="cn.net.tongfang.web.service.ChildrenMediExam36Service">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="childDirect" ref="GenDefaultVal" />
		<property name="sysInfo" ref="systemInformationUtils" />
		<property name="childRocordService" ref="ChildLastMedicalExamRecordService" />
		<dwr:remote javascript="ChildrenMediExam36Service" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="ChildrenMediExamService" class="cn.net.tongfang.web.service.ChildrenMediExamService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="childDirect" ref="GenDefaultVal" />
		<property name="sysInfo" ref="systemInformationUtils" />
		<property name="childRocordService" ref="ChildLastMedicalExamRecordService" />
		<dwr:remote javascript="ChildrenMediExamService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="ConsultationService" class="cn.net.tongfang.web.service.ConsultationService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="ConsultationService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="CureSwitchService" class="cn.net.tongfang.web.service.CureSwitchService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="CureSwitchService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="CureBackService" class="cn.net.tongfang.web.service.CureBackService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="CureBackService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="DiabetesVisitService" class="cn.net.tongfang.web.service.DiabetesVisitService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="DiabetesVisitService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="FirstVistBeforeBornService" class="cn.net.tongfang.web.service.FirstVistBeforeBornService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="sysUtils" ref="systemInformationUtils" />
		<property name="womanRocordService" ref="womanRocordService" />
		<dwr:remote javascript="FirstVistBeforeBornService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="FuriousInfoService" class="cn.net.tongfang.web.service.FuriousInfoService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="FuriousInfoService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="FuriousVisitService" class="cn.net.tongfang.web.service.FuriousVisitService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="FuriousVisitService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="HealthEducatService" class="cn.net.tongfang.web.service.HealthEducatService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="HealthEducatService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="HypertensionVisitService" class="cn.net.tongfang.web.service.HypertensionVisitService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="HypertensionVisitService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="InfectionReportService" class="cn.net.tongfang.web.service.InfectionReportService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="InfectionReportService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="MedicalExamService" class="cn.net.tongfang.web.service.MedicalExamService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="MedicalExamService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="ReceptionService" class="cn.net.tongfang.web.service.ReceptionService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="ReceptionService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="VaccineInfoService" class="cn.net.tongfang.web.service.VaccineInfoService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="VaccineInfoService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="VaccinationService" class="cn.net.tongfang.web.service.VaccinationService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="VaccinationService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="VisitBeforeBornService" class="cn.net.tongfang.web.service.VisitBeforeBornService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="sysInfo" ref="systemInformationUtils" />
		<property name="womanRocordService" ref="womanRocordService" />
		<dwr:remote javascript="VisitBeforeBornService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="VisitAfterBornService" class="cn.net.tongfang.web.service.VisitAfterBornService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="sysInfo" ref="systemInformationUtils" />
		<property name="womanRocordService" ref="womanRocordService" />
		<dwr:remote javascript="VisitAfterBornService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="StatService" class="cn.net.tongfang.web.service.StatService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="StatService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="FileNumSearch" class="cn.net.tongfang.web.service.FileNumSearch">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="FileNumSearch" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<!-- 修改开始 -->
	<bean id="HomeNumSearch" class="cn.net.tongfang.web.service.HomeNumSearch">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="HomeNumSearch" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<!-- 修改结束 -->
	<bean id="ReportStat" class="cn.net.tongfang.web.service.ReportStat">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="ReportStat" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<!-- 修改开始 -->
	<bean id="HomeInfoService" class="cn.net.tongfang.web.service.HomeInfoService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="homeNoGen" ref="homeNoGen" />
		<property name="mgr" ref="mgr" />
		<dwr:remote javascript="HomeInfoService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="TuberSuperviseService" class="cn.net.tongfang.web.service.TuberSuperviseService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="TuberSuperviseService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<!-- 修改结束 -->
	<bean id="QueryByHomeService" class=" cn.net.tongfang.web.service.QueryByHomeService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="QueryByHomeService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="InitMainDataService" class=" cn.net.tongfang.web.service.InitMainDataService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="InitMainDataService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="HighRiskService" class="cn.net.tongfang.web.service.HighRiskService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="HighRiskService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="TestService" class=" cn.net.tongfang.web.service.TestService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="TestService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="ClinicLogsService" class="cn.net.tongfang.web.service.ClinicLogsService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="ClinicLogsService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="StatisticService" class="cn.net.tongfang.web.service.StatisticService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="StatisticService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="ReportService" class=" cn.net.tongfang.web.service.ReportService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="ReportService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="systemInformationUtils" class="cn.net.tongfang.framework.util.SystemInformationUtils">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="systemInformationUtils" ></dwr:remote>
	</bean>

	<bean id="BirthCertificateMsgService" class=" cn.net.tongfang.web.service.BirthCertificateMsgService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="sysInfoUtils" ref="systemInformationUtils" />
		<property name="fileNoGen" ref="fileNoGen" />
		<property name="moduleMgr" ref="UserMenuTreeService" />
		<dwr:remote javascript="BirthCertificateMsgService"><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="DataExportService" class=" cn.net.tongfang.web.service.DataExportService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="reportService" ref="ReportService"></property>
		<property name="sysInfos" ref="systemInformationUtils"></property>
		<property name="summaryService" ref="summaryService"></property>
		<property name="userMenuTreeService" ref="UserMenuTreeService"></property>
		<dwr:remote javascript="DataExportService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="MedicalExamPrintService" class="cn.net.tongfang.web.service.MedicalExamPrintService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="MedicalExamPrintService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="GenDefaultVal" class="cn.net.tongfang.framework.util.service.GenDefaultVal">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="GenDefaultVal" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="EvaluateChildService" class="cn.net.tongfang.web.service.EvaluateChildService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="EvaluateChildService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>

	<bean id="summaryService" class="cn.net.tongfang.web.service.SummaryService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="person" ref="PersonalInfoService" />
		<dwr:remote javascript="summaryService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="womanRocordService"
		class="cn.net.tongfang.web.service.WomanLastMedicalExamRecordService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="womanRocordService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	
	<bean id="ChildLastMedicalExamRecordService"
		class="cn.net.tongfang.web.service.ChildLastMedicalExamRecordService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="ChildLastMedicalExamRecordService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	
	<bean id="waitingThingService"
		class="cn.net.tongfang.web.service.WaitingThingService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="fileNoGen" ref="fileNoGen" />
		<dwr:remote javascript="waitingThingService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="DiseaseAndHearScreenConsentService" class="cn.net.tongfang.web.service.DiseaseAndHearScreenConsentService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="DiseaseAndHearScreenConsentService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="HearScreenReportCardService" class="cn.net.tongfang.web.service.HearScreenReportCardService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="HearScreenReportCardService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="BabyBarrierRegService"
		class="cn.net.tongfang.web.service.BabyBarrierRegService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="babyBarrierRegService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	
	<bean id="loginOffHealthFileService"
		class="cn.net.tongfang.web.service.LoginOffHealthFileService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="fileNoGen" ref="fileNoGen" />
		<dwr:remote javascript="loginOffService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="healthfileMaternalService"
		class="cn.net.tongfang.web.service.HealthfileMaternalBuildService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="healthfileMaternalService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<bean id="HealthFileChildrenService"
		class="cn.net.tongfang.web.service.HealthFileChildrenService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<dwr:remote javascript="HealthFileChildrenService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	
	<bean id="repeatFileNoService"
		class=" cn.net.tongfang.web.service.ProcListExamByFilesservice">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="userMenuTreeService" ref="UserMenuTreeService"></property>
		<property name="vaccinationService" ref="VaccinationService"></property>
		<dwr:remote javascript="repeatFileNoService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	
	<bean id="CommonExamService"
		class="cn.net.tongfang.web.service.commonexam.CommonExamService">
		<aop:scoped-proxy />
		<property name="sessionFactory" ref="sessionFactory" />
		<property name="commonExamUtil" ref="commonExamUtil" />
		<property name="fileNoGen" ref="fileNoGen" />
		<dwr:remote javascript="CommonExamService" ><dwr:filter class="cn.net.tongfang.web.util.DWRTimeoutFilter"/></dwr:remote>
	</bean>
	<tx:annotation-driven transaction-manager="transactionManager"  proxy-target-class="true"/>
	<context:component-scan base-package="cn.net.tongfang" />
</beans>
